{% extends 'base.html' %}
{% load static %}

{% block css %}
    <link href="{% static 'css/main.css' %}" rel="stylesheet"/>
    <link href="{% static 'css/helper.css' %}" rel="stylesheet"/>
{% endblock %}

{% block body %}
    {% include 'nav.html' %}
    <div class="container my-5 pt-5 ">
        <div class="row mt-5 pt-5 align-self-center">
            <div class="col-12 col-md-2 col-lg-3"></div>
            <div class="col12 col-md-8 col-lg-6 neumorphic_form" id="toplevel">
                <form action="/v2/search/" method="get" class="my-3">
                    <div class="text-center h3 p-3">Search For Hospitals</div>

                    <div class="form-row mb-3 px-2 px-md-5">
                        <div class="input-group">
                            <input name="lat" id="lat" hidden>
                            <input name="lng" id="lng" hidden>
                            <div id="search-box" class="input-left col-12 col-md-6  my-2"></div>

                            <div id="hsp-box" class="input-right col-12 col-md-6 my-2">
                                <div class="mapboxgl-ctrl-geocoder input-right mapboxgl-ctrl w-100">
                                    <svg class="mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-search"
                                         viewBox="0 0 18 18" xml:space="preserve" width="18" height="18"><path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"></path></svg>
                                    <input type="text" class="mapboxgl-ctrl-geocoder--input" placeholder="Hospital Name"
                                           aria-label="Hospital Name" name="query">
                                    <div class="suggestions-wrapper">
                                        <ul class="suggestions" style="display: none;"></ul>
                                    </div>
                                    <div class="mapboxgl-ctrl-geocoder--pin-right">
                                        <button aria-label="Clear" class="mapboxgl-ctrl-geocoder--button">
                                            <svg class="mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-close"
                                                 viewBox="0 0 18 18" xml:space="preserve" width="18" height="18"><path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"></path></svg>
                                        </button>
                                        <svg class="mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-loading"
                                             viewBox="0 0 18 18" xml:space="preserve" width="18" height="18"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"></path>
                                            <path opacity=".1"
                                                  d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"></path></svg>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="" id="topsearch">
                        <center>
                            <button type="submit" class="btn input-left input-right bg-dark btn-dark">Search
                            </button>
                        </center>
                    </div>
                    <div class="text-center mb-3">
                        <a class="links link-primary" href="javascript:void(0)" onclick="toggleFilters()"
                           id="filtertext">
                            Filter Results
                        </a>
                    </div>
                    <div class="container text-center h6" id="filters">
                        <div class="row my-4">
                            <div class="col">
                                <label for="oxyfr" class="form-label">Oxygen Care
                                    <a data-toggle="popover"
                                       title="Oxygen Care"
                                       href="javascript:void(0)"
                                       data-bs-trigger="focus"
                                       data-bs-content="Quality Rating for Oxyen Care">
                                        <i class="fa fa-info-circle text-dark" aria-hidden="true"></i>
                                    </a></label>
                                <div class="star-rating col">
                                    <div id="oxyfr" class="form-check-inline">
                                        <div class="rate">
                                            <input type="radio" id="of5" value="5" name="oxyfr">
                                            <label for="of5"></label>
                                            <input type="radio" id="of4" value="4" name="oxyfr">
                                            <label for="of4"></label>
                                            <input type="radio" id="of3" value="3" name="oxyfr">
                                            <label for="of3"></label>
                                            <input type="radio" id="of2" value="2" name="oxyfr">
                                            <label for="of2"></label>
                                            <input type="radio" id="of1" value="1" name="oxyfr">
                                            <label for="of1"></label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col">
                                <label for="financialfr" class="form-label">Affordability
                                    <a data-toggle="popover"
                                       title="Affordability"
                                       href="javascript:void(0)"
                                       data-bs-trigger="focus"
                                       data-bs-content="Affordability of the hospital .higher is expensive">
                                        <i class="fa fa-info-circle text-dark" aria-hidden="true"></i>
                                    </a>

                                </label>
                                <div class="star-rating col">
                                    <div id="financialfr" class="form-check-inline">
                                        <div class="rate financial">
                                            <input type="radio" id="ff5" value="5" name="financialfr">
                                            <label for="ff5"></label>
                                            <input type="radio" id="ff4" value="4" name="financialfr">
                                            <label for="ff4"></label>
                                            <input type="radio" id="ff3" value="3" name="financialfr">
                                            <label for="ff3"></label>
                                            <input type="radio" id="ff2" value="2" name="financialfr">
                                            <label for="ff2"></label>
                                            <input type="radio" id="ff1" value="1" name="financialfr">
                                            <label for="ff1"></label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row my-4">
                            <div class="col">
                                <label for="ventsf" class="form-label">Ventilator Availability
                                    <a data-toggle="popover"
                                       href="javascript:void(0)"
                                       data-bs-trigger="focus"
                                       title="Ventilator Availability"
                                       data-bs-content="Chance of Getting a Ventilator Beds (%) ">
                                        <i class="fa fa-info-circle text-dark" aria-hidden="true"></i>
                                    </a></label>
                                <br>
                                <input id="ventsf" type="range" class="form-control-range" name="ventfr" value="0"
                                       min="0" max="100" oninput="this.nextElementSibling.value = this.value">
                                <output for="ventfr"></output>
                            </div>
                            <div class="col">
                                <label for="oxyasf" class="form-label">Oxygen Availability
                                    <a data-toggle="popover"
                                       href="javascript:void(0)"
                                       data-bs-trigger="focus"
                                       title="Oxygen Availability"
                                       data-bs-content="Chance of Getting a Oxygen Supplied Beds (%) ">
                                        <i class="fa fa-info-circle text-dark" aria-hidden="true"></i>
                                    </a></label>
                                <br>
                                <input id="oxyasf" type="range" class="form-control-range" name="oxyafr" value="0"
                                       min="0" max="100" oninput="this.nextElementSibling.value = this.value">
                                <output for="oxyasf"></output>
                            </div>
                        </div>
                        <div class="row my-4">
                            <div class="col">
                                <label for="icusf" class="form-label">ICU Availability
                                    <a data-toggle="popover"
                                       href="javascript:void(0)"
                                       data-bs-trigger="focus"
                                       title="ICU Availability"
                                       data-bs-content="Chance of Getting into ICU if needed (%) ">
                                        <i class="fa fa-info-circle text-dark" aria-hidden="true"></i>
                                    </a>
                                </label>
                                <br>
                                <input id="icusf" type="range" class="form-control-range" name="icufr" value="0" min="0"
                                       max="100" oninput="this.nextElementSibling.value = this.value">
                                <output for="icusf"></output>
                            </div>
                            <div class="col">
                                <label for="costsf" class="form-label">Avg Cost
                                    <a data-toggle="popover"
                                       href="javascript:void(0)"
                                       data-bs-trigger="focus"
                                       title="Average Cost"
                                       data-bs-content="Average Daily Cost of Stay (including Beds, Doctor Fees , Test ,Excluding Medicines">
                                        <i class="fa fa-info-circle text-dark" aria-hidden="true"></i>
                                    </a>
                                </label>
                                <div class="input-group" id="costsf">
                                    <input type="text" class="form-control input-left" value="0"
                                           placeholder="Enter Minimum avg cost"
                                           name="price-min">
                                    <span class="input-group-text">to</span>
                                    <input type="text" class="form-control input-right" value="100000"
                                           placeholder="Enter Maximum avg cost"
                                           name="price-max">
                                </div>
                            </div>
                        </div>
                        <div class="row my-4">
                            <div class="col">
                                <label for="caref" class="form-label">Convenience
                                    <a data-toggle="popover"
                                       href="javascript:void(0)"
                                       data-bs-trigger="focus"
                                       title="Convenience"
                                       data-bs-content="Convenience of Getting Care (higher is Better) the ease with dealing with Administrative">
                                        <i class="fa fa-info-circle text-dark" aria-hidden="true"></i>
                                    </a>
                                </label>
                                <div class="star-rating col">
                                    <div id="caref" class="form-check-inline">
                                        <div class="rate">
                                            <input type="radio" id="cf5" value="5" name="carefr">
                                            <label for="cf5"></label>
                                            <input type="radio" id="cf4" value="4" name="carefr">
                                            <label for="cf4"></label>
                                            <input type="radio" id="cf3" value="3" name="carefr">
                                            <label for="cf3"></label>
                                            <input type="radio" id="cf2" value="2" name="carefr">
                                            <label for="cf2"></label>
                                            <input type="radio" id="cf1" value="1" name="carefr">
                                            <label for="cf1"></label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col">
                                <label for="covidfr" class="form-label">Covid Care
                                    <a data-toggle="popover"
                                       href="javascript:void(0)"
                                       data-bs-trigger="focus"
                                       title="Covid Care"
                                       data-bs-content="Quality of Covid Care (higher is better)">
                                        <i class="fa fa-info-circle text-dark" aria-hidden="true"></i>
                                    </a>
                                </label>
                                <div class="star-rating col">
                                    <div id="covidfr" class="form-check-inline">
                                        <div class="rate">
                                            <input type="radio" id="cof5" value="5" name="covidfr">
                                            <label for="cof5"></label>
                                            <input type="radio" id="cof4" value="4" name="covidfr">
                                            <label for="cof4"></label>
                                            <input type="radio" id="cof3" value="3" name="covidfr">
                                            <label for="cof3"></label>
                                            <input type="radio" id="cof2" value="2" name="covidfr">
                                            <label for="cof2"></label>
                                            <input type="radio" id="cof1" value="1" name="covidfr">
                                            <label for="cof1"></label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="mb-3" id="bottomsearch">
                        <center>
                            <button type="submit" class="btn input-left input-right bg-dark btn-dark">Search
                            </button>
                        </center>
                    </div>
                </form>

            </div>
        </div>
    </div>

{% endblock %}

{% block script %}
    <script src="{% static 'js/location.js' %}"></script>
    <script>
        shown = false
        $('#filters').hide()
        $('#bottomsearch').hide()

        function toggleFilters() {
            if (shown) {
                $('#filters').hide()
                $('#topsearch').show()
                $('#bottomsearch').hide()
                $('#filtertext').html('Show Filter')
            } else {
                $('#filters').show()
                $('#topsearch').hide()
                $('#bottomsearch').show()
                $('#filtertext').html('Hide Filter')
            }
            shown = !shown
        }

        $(document).ready(function () {
            $('[data-toggle="popover"]').popover();
        });
    </script>

{% endblock %}